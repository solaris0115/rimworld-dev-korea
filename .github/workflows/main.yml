name: Wiki Smoke Push (rimworld-dev-korea)

on:
  workflow_dispatch: {}   # ğŸ‘‰ ìˆ˜ë™ ì‹¤í–‰ (Actions íƒ­ì—ì„œ Run workflow)

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - name: Git ì‚¬ìš©ì ì„¤ì •
        run: |
          git config --global user.name  "wiki-bot"
          git config --global user.email "bot@example.com"

      - name: íƒ€ê²Ÿ ìœ„í‚¤ í´ë¡ 
        env:
          # ğŸ‘‰ ë¦¬í¬ Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret
          # ì´ë¦„: GH_TOKEN / ê°’: Fine-grained PAT (Contents: Read/Write, ëŒ€ìƒ ë¦¬í¬ ì§€ì •)
          GH_TOKEN: ${{ secrets.GPT_TOKEN }}
        run: |
          git clone https://${GH_TOKEN}@github.com/solaris0115/rimworld-dev-korea.wiki.git target.wiki

      - name: í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ë° í‘¸ì‹œ
        run: |
          cd target.wiki
          echo "last-run: $(date -u +"%Y-%m-%dT%H:%M:%SZ")" > _ping.md
          git add _ping.md
          git commit -m "test(wiki): smoke push"
          # âš ï¸ GitHub Wiki ê¸°ë³¸ ë¸Œëœì¹˜ëŠ” ë³´í†µ master ì…ë‹ˆë‹¤. ì—ëŸ¬ ì‹œ mainìœ¼ë¡œ ë°”ê¿”ì„œ ì¬ì‹œë„.
          git push origin master
