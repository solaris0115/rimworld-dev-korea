name: Wiki Smoke Push
on:
  workflow_dispatch: {}
jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - name: Configure Git
        run: |
          git config --global user.name  "wiki-bot"
          git config --global user.email "bot@bot.com"

      - name: Clone Target Wiki
        env:
          GH_TOKEN: ${{ secrets.GPT_TOKEN }}
        run: |
          git clone https://${GH_TOKEN}@github.com/solaris0115/Mod-Guide-with-AI.wiki.git target.wiki

      - name: Touch a test file and push
        run: |
          cd target.wiki
          echo "last-run: $(date -u +"%Y-%m-%dT%H:%M:%SZ")" > _ping.md
          git add _ping.md
          git commit -m "test(wiki): smoke push"
          # 위키 기본 브랜치가 보통 master
          git push origin master
